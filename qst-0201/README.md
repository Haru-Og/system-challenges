# 2.CLIアプリ
ユーザーの一覧表示、追加、削除ができるCLIアプリを作成してください。

本問の解答には`ans-0201`というディレクトリを作成し、その中でディレクトリやファイルを作成してください。

## 目次
- [2.CLIアプリ](#2cliアプリ)
  - [目次](#目次)
  - [データベース](#データベース)
    - [SQLite](#sqlite)
    - [テーブル定義](#テーブル定義)
  - [2-1.ユーザーの一覧表示(`list-users`)](#2-1ユーザーの一覧表示list-users)
    - [2-1の要件](#2-1の要件)
    - [2-1の実行と出力の例](#2-1の実行と出力の例)
  - [2-2. ユーザーの追加(`add-user`)](#2-2-ユーザーの追加add-user)
    - [2-2の要件](#2-2の要件)
    - [2-2の実行と出力の例](#2-2の実行と出力の例)
  - [2-3. ユーザーの削除(`delete-user`)](#2-3-ユーザーの削除delete-user)
    - [2-3の要件](#2-3の要件)
    - [2-3の実行と出力の例](#2-3の実行と出力の例)


## データベース

### SQLite
追加されたユーザー情報の保管にはデータベースを使用します。データベースエンジンは[SQLite](https://www.sqlite.org/index.html)で付属の`app.db`にデータを格納します。

もし必要ならSQLiteをインストールしてください。SQLiteがインストールされているかどうかは下記のコマンドで確認できます。`$`はシェルのプロンプトを表します。

```
$ sqlite3 --version
3.39.5 2022-10-14 20:58:05 554764a6e721fab307c63a4f98cd958c8428a5d9d8edfde951858d6fd02daapl
```

### テーブル定義
`app.db`には`users`テーブルがあり、以下のようなテーブル定義となっています。

|カラム名|型|備考|制約|
| ---- | ---- | ---- | --- |
|id|INTEGER|ユーザーID|主キー、AUTO INCREMENT|
|name|TEXT|ユーザー名|NOT NULL制約である|
|age|INTEGER|年齢|NOT NULL制約である|
|password|TEXT|パスワード|NOT NULL制約である|


またすでに`users`テーブルには以下のレコードが格納されています。
|id|name|age|password|
| ---- | ---- | ---- | --- |
|1| Alice| 10 | 64489c85dc2fe0787b85cd87214b3810 |
|2| Bob | 20  | 2fc1c0beb992cd7096975cfebf9d5c3b |
|3| Charlie | 30 | ea2bfa79cd221f1e88a9bf39ea155cd8 |

## 2-1.ユーザーの一覧表示(`list-users`)
ユーザーの一覧を表示するコマンドを実装してください。

### 2-1の要件
プログラムの実行には以下の形式を取ります。

```
${execution} list-users
```

- `${execution}`はファイルを指定してプログラムを呼び出す箇所です。
	- 例えばNode.jsの場合、`node main.js`となります
	- PHPの場合は`php -f main.php`となります
- `list-users`を実行すると`users`テーブルの全てのレコードを標準出力に出力します
- 出力形式は標準出力の1行につき1レコードで、左からidカラム、nameカラム、ageカラム、passwordカラムの順番で半角スペース区切りで出力してください
- レコードの出力順はidカラムの昇順としてください
- パスワードは秘匿のため、パスワードの長さと同じ文字数の`*`で表示してください
- ユーザーの一覧表示に成功したとき「ユーザーの一覧表示に成功しました。」と標準出力に出力してください
- ユーザーの一覧表示に失敗したとき「ユーザーの一覧表示に失敗しました。」と標準エラー出力に出力してください
- ユーザーの一覧表示の失敗を補足するために[`try...catch`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/try...catch)などを用いて実装してください
- 本問の解答には外部ライブラリを使用しても構いません
- 実装は1ファイルで行ってください
	- Node.jsの場合は`main.js`というファイル名にしてください
	- PHPの場合は`main.php`というファイル名にしてください

### 2-1の実行と出力の例
以下にNode.jsでの実行例(成功例)を示します。`$`はシェルのプロンプトを表します。

```
$ node main.js list-users
1 Alice 10 ********************************
2 Bob 20 ********************************
3 Charlie 30 ********************************
ユーザーの一覧表示に成功しました。
```

## 2-2. ユーザーの追加(`add-user`)
ユーザー名、年齢、パスワードを指定してユーザーを追加するコマンドを実装してください。

### 2-2の要件
プログラムの実行には以下の形式を取ります。

```
${execution} add-user ${name} ${age} ${password}
```

- `${execution}`はファイルを指定してプログラムを呼び出す箇所です。
	- 例えばNode.jsの場合、`node main.js`となります
	- PHPの場合は`php -f main.php`となります
- `add-user`を実行すると`users`テーブルに新しくレコードを1つ追加します
- `${name}`にはユーザー名(文字列)を指定します
- `${age}`には年齢(0以上の正の整数)を指定します
- `${password}`にはパスワード(文字列)を指定します
- 追加されたレコードの各カラムの対応は以下の通りです

|カラム名|値|
| ---- | ---- |
|id|プログラム実行前にあったidの最大値 + 1|
|name|`${name}`で指定した値|
|age|`${age}`で指定した値|
|password|`${password}`で指定した値|

- ユーザーの追加に成功した場合、標準出力に「ユーザーの追加に成功しました。」と出力してください。
- ユーザーの追加に失敗した場合、標準エラー出力に「ユーザーの追加に失敗しました。」と出力してください。
- ユーザーの追加の失敗を補足するために[`try...catch`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/try...catch)などを用いてください
- 本問の解答には外部ライブラリを使用しても構いません
- 実装は2-1の解答に利用したファイルに追記してください


### 2-2の実行と出力の例
以下にNode.jsでの実行例(成功例)を示します。`$`はシェルのプロンプトを表します。

```
$ node main.js add-user David 40 mypassword
ユーザーの作成に成功しました。
```

## 2-3. ユーザーの削除(`delete-user`)
ユーザーIDを指定し、該当するユーザーを削除するコマンドを実装してください。

### 2-3の要件
プログラムの実行には以下の形式を取ります。

```
${execution} delete-user ${id}
```
- `${execution}`はファイルを指定してプログラムを呼び出す箇所です。例えばNode.jsの場合、`node main.js`となり、PHPの場合は`php -f main.php`となります。
- `delete-user`を実行すると`users`テーブルから`${id}`と一致するユーザーのレコードを削除するようにしてください
- `${id}`には0以上の正の整数を指定します
- ユーザーの削除に成功した場合、標準出力に「ユーザーの削除に成功しました。」と出力してください。
- ユーザーの削除に失敗した場合、または`${id}`で指定したユーザーが存在しない場合は標準エラー出力に「ユーザーの削除に失敗しました。」と出力してください。
- ユーザーの削除の失敗を補足するために[`try...catch`](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/try...catch)などを用いてください
- 本問の解答には外部ライブラリを使用しても構いません
- 実装は2-1と2-2の解答に利用したファイルに追記してください

### 2-3の実行と出力の例
以下にNode.jsでの実行例(成功例)を示します。`$`はシェルのプロンプトを表します。

```
$ node main.js delete-user 4
ユーザーの削除に成功しました。
```
